# 4. Процесс работы с ветками

## 4.1. Создание веток

**Новая функциональность**

```bash
git checkout develop
git checkout -b feature/<имя_функции>
```

**Исправление ошибок**

```bash
git checkout develop
git checkout -b bugfix/<номер_тикета>
```

**Подготовка релиза**

```bash
git checkout develop
git checkout -b release/<версия>
```

**Горячее исправление (hotfix)**

```bash
git checkout main
git checkout -b hotfix/<номер_тикета>
```

## 4.2. Правила оформления коммит-сообщений

Корректное оформление коммитов — ключ к читаемой истории изменений, упрощению ревью и автоматизации сборок. Коммит должен отражать одну законченную задачу, быть понятен без просмотра диффа и соответствовать приведённым ниже требованиям.

**Общие правила**

1. Каждый коммит должен быть атомарным — содержать одно логически завершённое изменение (например, добавление функции, исправление бага или обновление документации).
2. Перед фиксацией изменений необходимо убедиться, что код компилируется, проходит тесты и не содержит временных правок.
3. Коммит оформляется в виде структурированного сообщения, состоящего из заголовка, тела и, при необходимости, нижней части с дополнительной информацией.
4. Используется повелительное наклонение (например: Add, Fix, Update, Remove).
5. Заголовок должен быть кратким (до 50 символов) и понятным — он отображается в логах и при ревью.
6. Между заголовком и телом обязательно вставляется пустая строка.
7. Тело коммита (если используется) должно отвечать на вопросы что сделано и зачем, но не как.
8. Если коммит связан с задачей или MR, добавляется ссылка в конце тела, например: `Related to: #1245` или `Fixes: MR!37`.

**Шаблон коммит-сообщения**

```
<Тип изменения>: <краткое описание>

<Подробное описание изменения, при необходимости>

Refs: #<номер задачи> / MR!<номер>
```

**Типы изменений (рекомендуемые префиксы)**

- `feat:` — добавление нового функционала.
- `fix:` — исправление ошибки.
- `refactor:` — изменение структуры кода без изменения логики.
- `docs:` — изменение документации.
- `test:` — добавление или изменение тестов.
- `build:` — изменения, связанные со сборкой, CI/CD.
- `chore:` — технические правки (обновление зависимостей, форматирование и т.п.).

**Пример правильного коммита**

```
fix: корректна проверка токена при продлении сессии

Исправлена логика обновления токена доступа. Теперь при повторной аутентификации
сессия корректно продлевается без повторного входа пользователя.
Fixes: #512
```

Хорошо, потому что:

- короткий, осмысленный заголовок в повелительном наклонении;
- есть тело, объясняющее суть и причину;
- указана связь с задачей в трекере;
- структура выдержана (заголовок, пустая строка, тело, ссылка).

**Пример неправильного коммита**

```
исправил немного авторизацию и кое-что еще
```

Плохо, потому что:

- нет типа (`fix:` / `feat:` и др.);
- отсутствует описание сути и причины изменений;
- неясно, что именно исправлено;
- используется разговорный стиль;
- не указан номер задачи.

## 4.3. Merge Request (MR)

- MR создаётся только через GitLab.
- В MR указываются:
  - ссылка на задачу в трекере;
  - описание изменений и результаты тестирования;
  - отметки согласующих лиц (архитектор, QA, релиз-менеджер).
- Все pipeline-проверки должны пройти успешно.
- После ревью MR сливается в `develop` (тип слияния — merge commit или squash по решению релиз-менеджера).
